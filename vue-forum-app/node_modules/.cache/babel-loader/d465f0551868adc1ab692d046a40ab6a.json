{"remainingRequest":"/home/scott/forumApp/vue-forum-app/node_modules/babel-loader/lib/index.js!/home/scott/forumApp/vue-forum-app/node_modules/eslint-loader/index.js??ref--13-0!/home/scott/forumApp/vue-forum-app/src/main.js","dependencies":[{"path":"/home/scott/forumApp/vue-forum-app/src/main.js","mtime":1596398635585},{"path":"/home/scott/forumApp/vue-forum-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scott/forumApp/vue-forum-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scott/forumApp/vue-forum-app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/scott/forumApp/vue-forum-app/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport Vuelidate from 'vuelidate';\nimport VueClosable from 'vue-closable';\nimport humanizeDate from './filters/humanizeDate';\nimport authMixin from './mixins/authMixin';\nVue.config.productionTip = false;\nVue.use(Vuelidate);\nVue.use(VueClosable);\nVue.filter('humanizeDate', humanizeDate);\nVue.mixin(authMixin); // Import all base components\n\nvar requireComponent = require.context('./components', true, /Base[A-Z]/);\n\nrequireComponent.keys().forEach(function (fileName) {\n  var baseComponentConfig = requireComponent(fileName);\n  baseComponentConfig = baseComponentConfig.default || baseComponentConfig;\n  var baseComponentName = baseComponentConfig.name || fileName.replace(/^.+\\//, '').replace(/\\.\\w+$/, '');\n  Vue.component(baseComponentName, baseComponentConfig);\n});\nrouter.beforeEach(\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(to, from, next) {\n    var token, nextRoute;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            token = localStorage.getItem('auth_token');\n\n            if (!(token && !store.getters.isLoggedIn)) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.prev = 2;\n            _context.next = 5;\n            return store.dispatch('loadCurrentUser');\n\n          case 5:\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n\n          case 10:\n            if (!(to.meta.auth && !store.getters.isLoggedIn)) {\n              _context.next = 13;\n              break;\n            }\n\n            store.dispatch('setNextRoute', {\n              route: to.fullPath\n            });\n            return _context.abrupt(\"return\", next({\n              name: 'Login'\n            }));\n\n          case 13:\n            if (!(to.meta.guest && store.getters.isLoggedIn)) {\n              _context.next = 15;\n              break;\n            }\n\n            return _context.abrupt(\"return\", next({\n              name: 'Home'\n            }));\n\n          case 15:\n            if (!(to.meta.permissions && !store.state.users.currentUser.can(to.meta.permissions))) {\n              _context.next = 17;\n              break;\n            }\n\n            return _context.abrupt(\"return\", next({\n              name: 'NotFound',\n              params: [to.path],\n              replace: true\n            }));\n\n          case 17:\n            if (!(store.state.nextRoute && to.name !== 'Login')) {\n              _context.next = 21;\n              break;\n            }\n\n            nextRoute = store.state.nextRoute;\n            store.dispatch('setNextRoute', {\n              route: null\n            });\n            return _context.abrupt(\"return\", next(nextRoute));\n\n          case 21:\n            next();\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 7]]);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nnew Vue({\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["/home/scott/forumApp/vue-forum-app/src/main.js"],"names":["Vue","App","router","store","Vuelidate","VueClosable","humanizeDate","authMixin","config","productionTip","use","filter","mixin","requireComponent","require","context","keys","forEach","fileName","baseComponentConfig","default","baseComponentName","name","replace","component","beforeEach","to","from","next","token","localStorage","getItem","getters","isLoggedIn","dispatch","console","log","meta","auth","route","fullPath","guest","permissions","state","users","currentUser","can","params","path","nextRoute","render","h","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport Vuelidate from 'vuelidate'\nimport VueClosable from 'vue-closable'\nimport humanizeDate from './filters/humanizeDate'\nimport authMixin from './mixins/authMixin'\n\nVue.config.productionTip = false\n\nVue.use(Vuelidate)\nVue.use(VueClosable)\n\nVue.filter('humanizeDate', humanizeDate)\n\nVue.mixin(authMixin)\n\n// Import all base components\nconst requireComponent = require.context('./components', true, /Base[A-Z]/)\nrequireComponent.keys().forEach((fileName) => {\n  let baseComponentConfig = requireComponent(fileName)\n  baseComponentConfig = baseComponentConfig.default || baseComponentConfig\n  const baseComponentName = baseComponentConfig.name || (\n    fileName\n      .replace(/^.+\\//, '')\n      .replace(/\\.\\w+$/, '')\n  )\n  Vue.component(baseComponentName, baseComponentConfig)\n})\n\nrouter.beforeEach(async (to, from, next) => {\n  const token = localStorage.getItem('auth_token')\n  if (token && !store.getters.isLoggedIn) {\n    try {\n      await store.dispatch('loadCurrentUser')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  if (to.meta.auth && !store.getters.isLoggedIn) {\n    store.dispatch('setNextRoute', { route: to.fullPath })\n    return next({ name: 'Login' })\n  }\n\n  if (to.meta.guest && store.getters.isLoggedIn) {\n    return next({ name: 'Home' })\n  }\n\n  if (to.meta.permissions && !store.state.users.currentUser.can(to.meta.permissions)) {\n    return next({ name: 'NotFound', params: [to.path], replace: true })\n  }\n\n  if (store.state.nextRoute && to.name !== 'Login') {\n    const nextRoute = store.state.nextRoute\n    store.dispatch('setNextRoute', { route: null })\n    return next(nextRoute)\n  }\n\n  next()\n})\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n"]}]}